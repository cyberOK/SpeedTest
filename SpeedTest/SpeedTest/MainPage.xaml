<Page
    x:Class="SpeedTest.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:SpeedTest"
    xmlns:vm="using:SpeedTest.ViewModel" 
    xmlns:arcControl="using:SpeedTest.ArcControl"
    xmlns:converter="using:SpeedTest.ViewModel.Converters"
    xmlns:speedDate="using:SpeedTest.ViewModel.HelpfullCollections"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:Interactivity="using:Microsoft.Xaml.Interactivity"
    xmlns:Core="using:Microsoft.Xaml.Interactions.Core"
    mc:Ignorable="d"

    Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">

    <Page.DataContext>
        <StaticResource ResourceKey="mainViewModel"/>
    </Page.DataContext>

    <Page.Resources>
        <converter:BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>
        <converter:RadioModeSelectedIntToBooltConverter x:Key="RadioModeSelectedIntToBooltConverter"/>
        <converter:BooleanToColorConverter x:Key="BooleanToColorConverter"/>
        <converter:DateToStringConverter x:Key="DateToStringConverter"/>

        <ControlTemplate TargetType="Button" x:Key="btTemplate">
            <Border CornerRadius="200" BorderBrush="CadetBlue" BorderThickness="3" Height="400" Width="400" >
                <ContentPresenter  HorizontalAlignment="Center" VerticalAlignment="Center" Content="Start" Height="120"/>
            </Border>
        </ControlTemplate>

        <Style x:Key="GridViewItemRevealStyle" TargetType="GridViewItem">
            <Setter Property="FontFamily" Value="{ThemeResource ContentControlThemeFontFamily}"/>
            <Setter Property="FontSize" Value="{ThemeResource ControlContentThemeFontSize}"/>
            <Setter Property="Background" Value="{ThemeResource GridViewItemBackground}"/>
            <Setter Property="Foreground" Value="{ThemeResource GridViewItemForeground}"/>
            <Setter Property="TabNavigation" Value="Local"/>
            <Setter Property="IsHoldingEnabled" Value="True"/>
            <Setter Property="HorizontalContentAlignment" Value="Center"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="Margin" Value="0,0,4,4"/>
            <Setter Property="MinWidth" Value="{ThemeResource GridViewItemMinWidth}"/>
            <Setter Property="MinHeight" Value="{ThemeResource GridViewItemMinHeight}"/>
            <Setter Property="AllowDrop" Value="False"/>
            <Setter Property="UseSystemFocusVisuals" Value="{StaticResource UseSystemFocusVisuals}"/>
            <Setter Property="FocusVisualMargin" Value="-2"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="GridViewItem">
                        <ListViewItemPresenter x:Name="Root" 
                                               CheckBrush="{ThemeResource GridViewItemCheckBrush}" 
                                               ContentMargin="{TemplateBinding Padding}" 
                                               CheckBoxBrush="{ThemeResource GridViewItemCheckBoxBrush}" 
                                               ContentTransitions="{TemplateBinding ContentTransitions}" 
                                               CheckMode="{ThemeResource GridViewItemCheckMode}" 
                                               DragOpacity="{ThemeResource ListViewItemDragThemeOpacity}" 
                                               DisabledOpacity="{ThemeResource ListViewItemDisabledThemeOpacity}" 
                                               DragBackground="{ThemeResource GridViewItemDragBackground}" 
                                               DragForeground="{ThemeResource GridViewItemDragForeground}" 
                                               FocusBorderBrush="Transparent" 
                                               FocusVisualMargin="{TemplateBinding FocusVisualMargin}" 
                                               FocusSecondaryBorderBrush="Transparent" 
                                               HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}" 
                                               Control.IsTemplateFocusTarget="True" 
                                               PressedBackground="{ThemeResource GridViewItemBackgroundPressed}" 
                                               PlaceholderBackground="{ThemeResource GridViewItemPlaceholderBackground}" 
                                               PointerOverForeground="{ThemeResource GridViewItemForegroundPointerOver}"
                                               PointerOverBackground="{ThemeResource GridViewItemBackgroundPointerOver}"
                                               ReorderHintOffset="{ThemeResource GridViewItemReorderHintThemeOffset}" 
                                               SelectedForeground="{ThemeResource GridViewItemForegroundSelected}"
                                               SelectionCheckMarkVisualEnabled="{ThemeResource GridViewItemSelectionCheckMarkVisualEnabled}" 
                                               SelectedBackground="Transparent" 
                                               SelectedPressedBackground="{ThemeResource GridViewItemBackgroundSelectedPressed}" 
                                               SelectedPointerOverBackground="Transparent" 
                                               VerticalContentAlignment="{TemplateBinding VerticalContentAlignment}">
                            <VisualStateManager.VisualStateGroups>
                                <VisualStateGroup x:Name="CommonStates">
                                    <VisualState x:Name="Normal"/>
                                    <VisualState x:Name="Selected"/>
                                    <VisualState x:Name="PointerOver">
                                        <VisualState.Setters>
                                            <Setter Target="Root.(RevealBrush.State)" Value="PointerOver"/>
                                        </VisualState.Setters>
                                    </VisualState>
                                    <VisualState x:Name="PointerOverSelected">
                                        <VisualState.Setters>
                                            <Setter Target="Root.(RevealBrush.State)" Value="PointerOver"/>
                                        </VisualState.Setters>
                                    </VisualState>
                                    <VisualState x:Name="PointerOverPressed">
                                        <VisualState.Setters>
                                            <Setter Target="Root.(RevealBrush.State)" Value="Pressed"/>
                                        </VisualState.Setters>
                                    </VisualState>
                                    <VisualState x:Name="Pressed">
                                        <VisualState.Setters>
                                            <Setter Target="Root.(RevealBrush.State)" Value="Pressed"/>
                                        </VisualState.Setters>
                                    </VisualState>
                                    <VisualState x:Name="PressedSelected">
                                        <VisualState.Setters>
                                            <Setter Target="Root.(RevealBrush.State)" Value="Pressed"/>
                                        </VisualState.Setters>
                                    </VisualState>
                                </VisualStateGroup>
                                <VisualStateGroup x:Name="DisabledStates">
                                    <VisualState x:Name="Enabled"/>
                                    <VisualState x:Name="Disabled">
                                        <VisualState.Setters>
                                            <Setter Target="Root.RevealBorderThickness" Value="0"/>
                                        </VisualState.Setters>
                                    </VisualState>
                                </VisualStateGroup>
                            </VisualStateManager.VisualStateGroups>
                        </ListViewItemPresenter>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <Style x:Key="GridViewItemContainerStyle1" BasedOn="{StaticResource GridViewItemRevealStyle}" TargetType="GridViewItem"/>
        
        <Style x:Key="ListViewItemRevealStyle" TargetType="ListViewItem">
            <Setter Property="FontFamily" Value="{ThemeResource ContentControlThemeFontFamily}"/>
            <Setter Property="FontSize" Value="{ThemeResource ControlContentThemeFontSize}"/>
            <Setter Property="Background" Value="{ThemeResource ListViewItemBackground}"/>
            <Setter Property="Foreground" Value="{ThemeResource ListViewItemForeground}"/>
            <Setter Property="TabNavigation" Value="Local"/>
            <Setter Property="IsHoldingEnabled" Value="True"/>
            <Setter Property="Padding" Value="12,0,12,0"/>
            <Setter Property="HorizontalContentAlignment" Value="Left"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="MinWidth" Value="{ThemeResource ListViewItemMinWidth}"/>
            <Setter Property="MinHeight" Value="{ThemeResource ListViewItemMinHeight}"/>
            <Setter Property="AllowDrop" Value="False"/>
            <Setter Property="UseSystemFocusVisuals" Value="{StaticResource UseSystemFocusVisuals}"/>
            <Setter Property="FocusVisualMargin" Value="0"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ListViewItem">
                        <ListViewItemPresenter x:Name="Root" 
                                               CheckBrush="{ThemeResource ListViewItemCheckBrush}" 
                                               ContentMargin="{TemplateBinding Padding}" 
                                               CheckBoxBrush="{ThemeResource ListViewItemCheckBoxBrush}" 
                                               ContentTransitions="{TemplateBinding ContentTransitions}" 
                                               CheckMode="{ThemeResource ListViewItemCheckMode}" 
                                               DragOpacity="{ThemeResource ListViewItemDragThemeOpacity}" 
                                               DisabledOpacity="{ThemeResource ListViewItemDisabledThemeOpacity}"
                                               DragBackground="{ThemeResource ListViewItemDragBackground}" 
                                               DragForeground="{ThemeResource ListViewItemDragForeground}"
                                               FocusBorderBrush="{ThemeResource ListViewItemFocusBorderBrush}"
                                               FocusVisualMargin="{TemplateBinding FocusVisualMargin}" 
                                               FocusSecondaryBorderBrush="{ThemeResource ListViewItemFocusSecondaryBorderBrush}" 
                                               HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}" 
                                               Control.IsTemplateFocusTarget="True" 
                                               PressedBackground="{ThemeResource ListViewItemBackgroundPressed}"
                                               PlaceholderBackground="{ThemeResource ListViewItemPlaceholderBackground}"
                                               PointerOverForeground="{ThemeResource ListViewItemForegroundPointerOver}"
                                               PointerOverBackground="{ThemeResource ListViewItemBackgroundPointerOver}" 
                                               ReorderHintOffset="{ThemeResource ListViewItemReorderHintThemeOffset}"
                                               SelectedForeground="{ThemeResource ListViewItemForegroundSelected}"
                                               SelectionCheckMarkVisualEnabled="{ThemeResource ListViewItemSelectionCheckMarkVisualEnabled}"
                                               SelectedBackground="LightGray" 
                                               SelectedPressedBackground="{ThemeResource ListViewItemBackgroundSelectedPressed}"
                                               SelectedPointerOverBackground="Gray"
                                               VerticalContentAlignment="{TemplateBinding VerticalContentAlignment}">
                            <VisualStateManager.VisualStateGroups>
                                <VisualStateGroup x:Name="CommonStates">
                                    <VisualState x:Name="Normal"/>
                                    <VisualState x:Name="Selected"/>
                                    <VisualState x:Name="PointerOver">
                                        <VisualState.Setters>
                                            <Setter Target="Root.(RevealBrush.State)" Value="PointerOver"/>
                                            <Setter Target="Root.RevealBorderBrush" Value="{ThemeResource ListViewItemRevealBorderBrushPointerOver}"/>
                                        </VisualState.Setters>
                                    </VisualState>
                                    <VisualState x:Name="PointerOverSelected">
                                        <VisualState.Setters>
                                            <Setter Target="Root.(RevealBrush.State)" Value="PointerOver"/>
                                            <Setter Target="Root.RevealBorderBrush" Value="{ThemeResource ListViewItemRevealBorderBrushPointerOver}"/>
                                        </VisualState.Setters>
                                    </VisualState>
                                    <VisualState x:Name="PointerOverPressed">
                                        <VisualState.Setters>
                                            <Setter Target="Root.(RevealBrush.State)" Value="Pressed"/>
                                            <Setter Target="Root.RevealBorderBrush" Value="{ThemeResource ListViewItemRevealBorderBrushPressed}"/>
                                        </VisualState.Setters>
                                    </VisualState>
                                    <VisualState x:Name="Pressed">
                                        <VisualState.Setters>
                                            <Setter Target="Root.(RevealBrush.State)" Value="Pressed"/>
                                            <Setter Target="Root.RevealBorderBrush" Value="{ThemeResource ListViewItemRevealBorderBrushPressed}"/>
                                        </VisualState.Setters>
                                    </VisualState>
                                    <VisualState x:Name="PressedSelected">
                                        <VisualState.Setters>
                                            <Setter Target="Root.(RevealBrush.State)" Value="Pressed"/>
                                            <Setter Target="Root.RevealBorderBrush" Value="{ThemeResource ListViewItemRevealBorderBrushPressed}"/>
                                        </VisualState.Setters>
                                    </VisualState>
                                </VisualStateGroup>
                                <VisualStateGroup x:Name="DisabledStates">
                                    <VisualState x:Name="Enabled"/>
                                    <VisualState x:Name="Disabled">
                                        <VisualState.Setters>
                                            <Setter Target="Root.RevealBorderThickness" Value="0"/>
                                        </VisualState.Setters>
                                    </VisualState>
                                </VisualStateGroup>
                            </VisualStateManager.VisualStateGroups>
                        </ListViewItemPresenter>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <Style x:Key="ListViewItemContainerStyle1" BasedOn="{StaticResource ListViewItemRevealStyle}" TargetType="ListViewItem"/>
    </Page.Resources>

    <Grid  x:Name="MainGrid" Background="#FFCFE6E6">
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="0.4*"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="0.1*"/>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="0.1*"/>
        </Grid.ColumnDefinitions>

        <!-- Arc Control -->
        <arcControl:Arc Grid.Column="1" Fill="DarkCyan" Thickness="30" Radius="200" PercentValue="215"/>
        <arcControl:Arc Grid.Column="1" Fill="Gray" Thickness="30" Radius="200" PercentValue="400" Opacity="0.4"/>
        <arcControl:Arc Grid.Column="1" Fill="DarkBlue" Thickness="30" Radius="171" PercentValue="97"/>
        <arcControl:Arc Grid.Column="1" Fill="Gray" Thickness="30" Radius="171" PercentValue="400" Opacity="0.2"/>

        <!-- Settings Panel Buttons -->
        <StackPanel Grid.Column="2" HorizontalAlignment="Center" Margin="0,50">
            <Button x:Name="setingsButton" 
                Background="Transparent"
                FontFamily="Segoe MDL2 Assets" 
                FontSize="36"                
                Content="&#xE713;" 
                Command="{Binding SettingsButtonPressed}"/>
            <Button x:Name="historyButton" 
                Background="Transparent"
                FontFamily="Segoe MDL2 Assets" 
                FontSize="36"                
                Content="&#xE81C;" 
                Command="{Binding HistoryButtonPressed}"/>
            <Button x:Name="backButton" 
                Background="Transparent"
                FontFamily="Segoe MDL2 Assets" 
                FontSize="36" 
                Content="&#xE72D;"
                Command="{Binding BackButtonPressed}"/>
        </StackPanel>

        <!-- Start Button -->
        <Button x:Name="startButton" 
                Template="{StaticResource btTemplate}" 
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                Grid.Column="1" FontSize="80"
                Command="{Binding StartButtonPressed}"/>

        <!-- Split Line -->
        <Grid Grid.Column="1" Grid.Row="1" HorizontalAlignment="Center" Width="1000">
            <Line Grid.Column="1" Grid.Row="1" HorizontalAlignment="Left" VerticalAlignment="Top" StrokeThickness="3" X1="0"  X2="499">
                <Line.Stroke>
                    <LinearGradientBrush StartPoint="0,0.5" EndPoint="0.8,1" ColorInterpolationMode="ScRgbLinearInterpolation">
                        <GradientStop Color="#FFBDEAEC" Offset="0" />
                        <GradientStop Color="#FF104368" Offset="1" />
                    </LinearGradientBrush>
                </Line.Stroke>
            </Line>

            <Line Grid.Column="1" Grid.Row="1" HorizontalAlignment="Right" VerticalAlignment="Top" StrokeThickness="3" X1="0"  X2="499">
                <Line.Stroke>
                    <LinearGradientBrush StartPoint="0.2,0.4" EndPoint="0.9,0.1" ColorInterpolationMode="ScRgbLinearInterpolation">
                        <GradientStop Color="#FFBDEAEC" Offset="1" />
                        <GradientStop Color="#FF104364" Offset="0" />
                    </LinearGradientBrush>
                </Line.Stroke>
            </Line>
        </Grid>
        
        <!-- Main Board -->
        <RelativePanel Grid.Column="1" Grid.Row="1" Width="600" Margin="0,30,0,0">
            <TextBlock x:Name="providerName"
                       Width="300"
                       Height="60"
                       FontSize="30"
                       Text="{Binding ProviderName}"
                       TextAlignment="Center"
                       Foreground="DarkCyan"
                       RelativePanel.AlignLeftWithPanel="True"/>
            <TextBlock x:Name="ipAdress"
                       Width="300"
                       Height="60"
                       FontSize="30"
                       Text="{Binding IpAdress}"
                       TextAlignment="Center"                       
                       RelativePanel.Below="providerName"/>
            <TextBlock x:Name="serverName"
                       Width="300"
                       Height="60"
                       FontSize="30"
                       Text="{Binding ServerName, Source={StaticResource mainViewModel}}"
                       TextAlignment="Center"
                       Foreground="DarkCyan" 
                       RelativePanel.RightOf="providerName"/>
            <TextBlock x:Name="serverLocation"
                       Width="300"
                       Height="60"
                       FontSize="30"
                       Text="{Binding ServerLocation, Source={StaticResource mainViewModel}}"
                       TextAlignment="Center"
                       RelativePanel.Below="serverName"
                       RelativePanel.RightOf="ipAdress"/>
            <Button x:Name="changeServerButton"
                    Width="300"
                    Height="60"
                    FontSize="30"
                    Content="Change server"
                    RelativePanel.Below="serverLocation"
                    RelativePanel.RightOf="providerName" 
                    Foreground="White" 
                    FontWeight="Normal"
                    Opacity="1"
                    Command="{Binding ChangeServerButtonPressed}">
                <Button.Background>
                    <LinearGradientBrush EndPoint="0,1" StartPoint="0.6,0">
                        <GradientStop Color="#FF14CEEC" Offset="1"/>
                        <GradientStop Color="#FF101757" Offset="0"/>
                    </LinearGradientBrush>
                </Button.Background>
            </Button>
        </RelativePanel>

        <!-- Settings Panel -->
        <SplitView x:Name="SettingSplitView" 
                   IsPaneOpen="{Binding IsSettingsPaneOpen}" 
                   FlowDirection="RightToLeft"                    
                   OpenPaneLength="450" Grid.Column="1" 
                   Margin="1263,50,50,155" 
                   Grid.RowSpan="2"
                   Grid.ColumnSpan="2" HorizontalAlignment="Right" VerticalAlignment="Stretch" 
                   BorderThickness="1" 
                   BorderBrush="DarkCyan">
            
            <Interactivity:Interaction.Behaviors>
                <Core:EventTriggerBehavior EventName="PaneClosing">
                    <Core:InvokeCommandAction Command="{Binding SettingSplitViewClosing}"/>
                </Core:EventTriggerBehavior>
            </Interactivity:Interaction.Behaviors>

            <SplitView.Pane>
                <Grid>
                    <RelativePanel HorizontalAlignment="Left" VerticalAlignment="Stretch">

                        <RelativePanel x:Name="SettingsPanel" Background="White" Width="450" IsHoldingEnabled="True" HorizontalAlignment="Stretch" 
                                       VerticalAlignment="Stretch" FlowDirection="RightToLeft">
                            <TextBlock x:Name="SettingsBlock" Text="Settings" FontSize="30" Foreground="DarkCyan"  Padding="40,10"
                                       RelativePanel.AlignRightWithPanel="True" Margin="30,0,0,0"/>
                            <Button x:Name="CloseSettingButton" Command="{Binding SettingSplitViewClosing}" Height="60" Width="60" Background="Transparent" 
                                    Foreground="DarkCyan" FontSize="30" FontFamily="Segoe MDL2 Assets" Content="&#xE711;" RelativePanel.AlignLeftWithPanel="True"/>
                        </RelativePanel>

                        <ListView  Margin="-30,0,0,0" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" RelativePanel.Below="SettingsPanel">
                            <ScrollViewer x:Name="ScrollForSettings" ScrollViewer.IsVerticalRailEnabled="True" VerticalScrollBarVisibility="Auto">
                                <RelativePanel x:Name="ContentPanel"  Background="LightGray" Width="454" >
                                    <TextBlock x:Name="LanguageBlock" Text="Language" FontSize="20" Padding="30,10" TextAlignment="Left" HorizontalAlignment="Left" 
                                               RelativePanel.AlignRightWithPanel="True"/>
                                    <ComboBox x:Name="LanguageComboBox" ItemsSource="{Binding Settings.Languages}" PlaceholderText="English" Width="320" Margin="30,0" 
                                              HorizontalContentAlignment="Left" FlowDirection="LeftToRight" RelativePanel.Below="LanguageBlock" RelativePanel.AlignRightWithPanel="True">

                                        <Interactivity:Interaction.Behaviors>
                                            <Core:EventTriggerBehavior EventName="SelectionChanged">
                                                <Core:InvokeCommandAction Command="{Binding LanguageComboBoxChanged}" 
                                                                          CommandParameter="{Binding ElementName=LanguageComboBox,Path=SelectedItem}"/>
                                            </Core:EventTriggerBehavior>
                                        </Interactivity:Interaction.Behaviors>

                                        <ComboBoxItem x:Name="EnglixhComboBoxItem"></ComboBoxItem>
                                        <ComboBoxItem x:Name="RussianComboBoxItem"></ComboBoxItem>
                                    </ComboBox>

                                    <TextBlock x:Name="ModeBlock" Text="Mode" FontSize="30" Foreground="DarkCyan" Padding="30,10" TextAlignment="Right"
                                               RelativePanel.Below="LanguageComboBox" RelativePanel.AlignRightWithPanel="True"/>
                                    <RadioButton x:Name="LightRadioButton" GroupName="Theme"  Content="Light" 
                                                 Command="{Binding SelectedItemRadioButtonChanged}" CommandParameter="{Binding ElementName=LightRadioButton,Path=Content}" 
                                                 IsChecked="{Binding SelectedMode, Converter={StaticResource RadioModeSelectedIntToBooltConverter}, ConverterParameter = 0}"
                                                 Margin="0,0,-30,0" Width="90" RelativePanel.Below="ModeBlock" RelativePanel.AlignRightWithPanel="True"/>
                                    <RadioButton x:Name="DarkRadioButton" GroupName="Theme" Content="Dark" 
                                                 Command="{Binding SelectedItemRadioButtonChanged}" CommandParameter="{Binding ElementName=DarkRadioButton,Path=Content}" 
                                                 IsChecked="{Binding SelectedMode, Converter={StaticResource RadioModeSelectedIntToBooltConverter}, ConverterParameter = 1}"
                                                 Margin="0,0,-30,0" Width="90" RelativePanel.Below="LightRadioButton" RelativePanel.AlignRightWithPanel="True"/>

                                    <TextBlock x:Name="AboutBlock" Text="About" FontSize="30" Foreground="DarkCyan" Padding="30,10" TextAlignment="Right" 
                                               RelativePanel.Below="DarkRadioButton" RelativePanel.AlignRightWithPanel="True"/>
                                    <TextBlock x:Name="ProgramNameBlock" Text="{Binding Settings.ProgramName}" FontSize="15" Foreground="Gray"  Padding="0,00,30,0"
                                               TextAlignment="Right" RelativePanel.Below="AboutBlock" RelativePanel.AlignRightWithPanel="True"/>
                                    <TextBlock x:Name="VersionBlock" Text="{Binding Settings.Version}" FontSize="15" Foreground="Gray"  Padding="0,00,30,0" 
                                               TextAlignment="Right" RelativePanel.Below="ProgramNameBlock" RelativePanel.AlignRightWithPanel="True"/>
                                    <TextBlock x:Name="MicrosoftResearchBlock" Text="Microsoft Research" FontSize="15" Foreground="Gray"  Padding="0,00,30,0" 
                                               TextAlignment="Right" RelativePanel.Below="VersionBlock" RelativePanel.AlignRightWithPanel="True"/>
                                    <RichTextBlock x:Name="AboutStoryBlock" Margin="50,30,30,30" RelativePanel.Below="MicrosoftResearchBlock">
                                        <Paragraph   TextAlignment="Right">
                                            <Run Text="{Binding Settings.AboutArticle}"/>
                                        </Paragraph>
                                    </RichTextBlock>

                                    <HyperlinkButton  x:Name="FeedBackLink" NavigateUri="{Binding Settings.FeedBackLink}" HorizontalAlignment="Right" Margin="30,0"
                                                      FontSize="16" RelativePanel.Below="AboutStoryBlock" RelativePanel.AlignRightWithPanel="True">Feedback</HyperlinkButton>
                                    <HyperlinkButton x:Name="RateLink" NavigateUri="{Binding Settings.RateLink}" HorizontalAlignment="Right" Margin="30,0" FontSize="16"
                                                     RelativePanel.Below="FeedBackLink" RelativePanel.AlignRightWithPanel="True">Rate us</HyperlinkButton>
                                </RelativePanel>
                            </ScrollViewer>
                        </ListView>

                    </RelativePanel>
                </Grid>
            </SplitView.Pane>
        </SplitView>

        <!-- History Panel -->
        <Grid Grid.Column="1"  Grid.RowSpan="2" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" >
            <RelativePanel Visibility="{Binding IsHistoryPanelOpen, Converter={StaticResource BooleanToVisibilityConverter}}" Height="700" Width="700" Background="WhiteSmoke" BorderThickness="1" BorderBrush="DarkCyan">

                <RelativePanel x:Name="HistoryPanel"  Background="White" IsHoldingEnabled="True" 
                               HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                               Width="700" >
                    <TextBlock x:Name="HistoryBlock" Text="History" FontSize="30" Foreground="DarkCyan" Padding="30,10" 
                                       RelativePanel.AlignLeftWithPanel="True"/>
                    <Button x:Name="DeleteHistoryButton" Command="{Binding DeleteHistoryButtonPressed}" Height="60" Width="60"  Background="Transparent" 
                                    Foreground="DarkCyan" FontSize="30" FontFamily="Segoe MDL2 Assets" Content="&#xE74D;" RelativePanel.RightOf="HistoryBlock"/>
                    <Button x:Name="CloseHistoryButton" Command="{Binding CloseHistoryButtonPressed}" Height="60" Width="60" Background="Transparent" FontSize="30"
                                    Foreground="DarkCyan" FontFamily="Segoe MDL2 Assets" Content="&#xE711;" RelativePanel.AlignRightWithPanel="True"/>
                </RelativePanel>


                <Line x:Name="ShadeLine" StrokeThickness="20" X1="0" X2="700" RelativePanel.Below="HistoryPanel">
                    <Line.Stroke>
                        <LinearGradientBrush StartPoint="0.5,0.3" EndPoint="0.5,1">
                            <GradientStop Color="WhiteSmoke" Offset="1" />
                            <GradientStop Color="LightGray" Offset="0.5" />
                        </LinearGradientBrush>
                    </Line.Stroke>
                </Line>

                <Grid x:Name="HistoryHeader" Width="700" Height="70"  Margin="0,0,0,10" RelativePanel.Below="HistoryPanel" RelativePanel.AlignRightWithPanel="True">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="0.5*"/>
                        <ColumnDefinition Width="1.5*"/>
                        <ColumnDefinition Width="1.2*"/>
                        <ColumnDefinition Width="0.8*"/>
                        <ColumnDefinition Width="0.8*"/>
                        <ColumnDefinition Width="0.8*"/>
                    </Grid.ColumnDefinitions>

                    <TextBlock Grid.Column="1" Text="Server" FontSize="20" Foreground="DarkCyan" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                    <TextBlock Grid.Column="2" Text="Date" FontSize="20" Foreground="DarkCyan" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                    <TextBlock Grid.Column="3" Text="Ping" FontSize="20" Foreground="DarkCyan" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                    <TextBlock Grid.Column="4" Text="Download" FontSize="20" Foreground="DarkCyan" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                    <TextBlock Grid.Column="5" Text="Upload" FontSize="20" Foreground="DarkCyan" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                    <TextBlock Grid.Column="3" Text="(Ms)" FontSize="20" Foreground="DarkGray" HorizontalAlignment="Center" VerticalAlignment="Bottom"/>
                    <TextBlock Grid.Column="4" Text="(Mbps)" FontSize="20" Foreground="DarkGray" HorizontalAlignment="Center" VerticalAlignment="Bottom"/>
                    <TextBlock Grid.Column="5" Text="(Mbps)" FontSize="20" Foreground="DarkGray" HorizontalAlignment="Center" VerticalAlignment="Bottom"/>
                </Grid>

                <Grid x:Name="HistoryCollectionGrid" RelativePanel.Below="HistoryHeader" Height="560" Width="700">
                    <GridView x:Name="HistoryGrid" ItemsSource="{Binding SpeedDataCollection}" ItemContainerStyle="{StaticResource GridViewItemContainerStyle1}" IsItemClickEnabled="True" SelectionMode="Single">

                        <Interactivity:Interaction.Behaviors>
                            <Core:EventTriggerBehavior EventName="SelectionChanged">
                                <Core:InvokeCommandAction Command="{Binding SingleHistorySelected, Source={StaticResource mainViewModel}}"
                                                          CommandParameter="{Binding ElementName=HistoryGrid, Path=SelectedItem}" />
                            </Core:EventTriggerBehavior>
                        </Interactivity:Interaction.Behaviors>

                        <GridView.ItemTemplate>
                            <DataTemplate>

                                <Grid Width="700" Height="50">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="0.4*"/>
                                        <ColumnDefinition Width="1.5*"/>
                                        <ColumnDefinition Width="1.2*"/>
                                        <ColumnDefinition Width="0.8*"/>
                                        <ColumnDefinition Width="0.8*"/>
                                        <ColumnDefinition Width="0.8*"/>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition/>
                                    </Grid.RowDefinitions>

                                    <Button x:Name="SingleHistoryRemoveButton" Grid.Column="0" VerticalAlignment="Center" HorizontalAlignment="Center"
                                            Visibility="{Binding IsSelected, Converter={StaticResource BooleanToVisibilityConverter}}" 
                                            Background="{Binding IsSelected, Converter={StaticResource BooleanToColorConverter}}"
                                            Height="50" Width="50" FontSize="20" FontFamily="Segoe MDL2 Assets" Content="&#xE711;"
                                            Command="{Binding SingleHistoryDeletedButtonPressed, Source={StaticResource mainViewModel}}"/>
                                    <Grid Grid.Column="1" Background="{Binding IsSelected, Converter={StaticResource BooleanToColorConverter}}">
                                        <TextBlock   Text="{Binding Server}" FontSize="20" Foreground="Black" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                    </Grid>
                                    <Grid Grid.Column="2" Background="{Binding IsSelected, Converter={StaticResource BooleanToColorConverter}}">
                                        <TextBlock Grid.Column="2" Text="{Binding Date, Converter={StaticResource DateToStringConverter}}" FontSize="20" Foreground="Black" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                    </Grid>
                                    <Grid Grid.Column="3" Background="{Binding IsSelected, Converter={StaticResource BooleanToColorConverter}}">
                                        <TextBlock Grid.Column="3" Text="{Binding Ping}" FontSize="20" Foreground="Black" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                    </Grid>
                                    <Grid Grid.Column="4" Background="{Binding IsSelected, Converter={StaticResource BooleanToColorConverter}}">
                                        <TextBlock Grid.Column="4" Text="{Binding DownloadSpeed}" FontSize="20" Foreground="Black" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                    </Grid>
                                    <Grid Grid.Column="5" Background="{Binding IsSelected, Converter={StaticResource BooleanToColorConverter}}">
                                        <TextBlock Grid.Column="5" Text="{Binding UploadSpeed}" FontSize="20" Foreground="Black" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                    </Grid>
                                </Grid>

                            </DataTemplate>
                        </GridView.ItemTemplate>
                    </GridView>
                </Grid>
            </RelativePanel>
        </Grid>

        <!-- Servers Panel -->
        <Grid Grid.Column="1" Grid.RowSpan="2" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Margin="0,0,0,140" >
            <RelativePanel x:Name="ServerPanel" Visibility="{Binding IsServerPanelOpen, Converter={StaticResource BooleanToVisibilityConverter}}" Height="540" Width="500" Background="WhiteSmoke" BorderThickness="1" BorderBrush="DarkCyan">

                <RelativePanel x:Name="ServersPanel"  Background="White" IsHoldingEnabled="True" 
                               HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                               Width="500" Height="100">
                    <TextBlock x:Name="Image" Text="&#xE774;" FontSize="40" Foreground="DarkCyan" Height="100" Width="100" TextAlignment="Right" Padding="0,30,10,0"
                                       FontFamily="Segoe MDL2 Assets" RelativePanel.AlignLeftWithPanel="True"/>
                    <Line X1="100" Y1="25" X2="100" Y2="75" Stroke="DarkCyan" StrokeThickness="2" />
                    <Grid RelativePanel.RightOf="Image" Height="100">
                        <Grid.RowDefinitions>
                            <RowDefinition/>
                            <RowDefinition/>
                        </Grid.RowDefinitions>
                        <TextBlock x:Name="HeaderServerName" Grid.Row="0" Text="{Binding ServerName, Source={StaticResource mainViewModel}}" FontSize="30" Foreground="DarkCyan" Padding="10,15,0,0"/>
                        <TextBlock x:Name="HeaderServerLocation" Grid.Row="1" Text="{Binding ServerLocation, Source={StaticResource mainViewModel}}" FontSize="20" Foreground="Black" Padding="10,0,0,0"/>
                    </Grid>
                    <Button x:Name="CloseServersPanelButton" Command="{Binding CloseServerPanelButtonPressed}" Height="100" Width="100" Background="Transparent" FontSize="30"
                                    Foreground="DarkCyan" FontFamily="Segoe MDL2 Assets" Content="&#xE711;" RelativePanel.AlignRightWithPanel="True"/>
                </RelativePanel>

                <AutoSuggestBox x:Name="ServerSuggestBox" PlaceholderText="Search" Width="450" Margin="24,0" FontSize="20" QueryIcon="Find" RelativePanel.Below="ServersPanel">

                    <Interactivity:Interaction.Behaviors>
                        <Core:EventTriggerBehavior EventName="TextChanged">
                            <Core:InvokeCommandAction Command="{Binding ServerSuggestBoxTextChanged, Source={StaticResource mainViewModel}}"
                                                      CommandParameter="{Binding ElementName=ServerSuggestBox, Path=Text}"/>
                        </Core:EventTriggerBehavior>
                    </Interactivity:Interaction.Behaviors>
                </AutoSuggestBox>

                <TextBlock x:Name="AvailableServers" Text="Available servers:" FontSize="20" Width="450" Margin="24,10,0,10"
                                        RelativePanel.Below="ServerSuggestBox"/>

                <ListView x:Name="ServersListView" ItemsSource="{Binding ServerNamesCollection, Source={StaticResource mainViewModel}}" 
                                                   ItemContainerStyle="{StaticResource ListViewItemContainerStyle1}" Width="500" Height="400" RelativePanel.Below="AvailableServers">

                    <Interactivity:Interaction.Behaviors>
                        <Core:EventTriggerBehavior EventName="SelectionChanged">
                            <Core:InvokeCommandAction Command="{Binding SingleServerSelected, Source={StaticResource mainViewModel}}"
                                                      CommandParameter="{Binding ElementName=ServersListView, Path=SelectedItem}"/>
                        </Core:EventTriggerBehavior>
                    </Interactivity:Interaction.Behaviors>
                    
                    <ListView.ItemTemplate>
                        <DataTemplate>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="200"/>
                                    <ColumnDefinition Width="20"/>
                                    <ColumnDefinition Width="1*"/>
                                </Grid.ColumnDefinitions>

                                <TextBlock x:Name="ServerName" Grid.Column="0" Text="{Binding}" FontSize="20" Foreground="DarkCyan" VerticalAlignment="Center" Padding="14,0,0,0"/>
                                <TextBlock x:Name="Splitter" Grid.Column="1" Text=" - " FontSize="20" VerticalAlignment="Center"/>
                                <TextBlock x:Name="ProviderName" Grid.Column="2" Text="Net Holding DDC" FontSize="20" TextAlignment="Left" VerticalAlignment="Center" Padding="10,0,0,0" />
                            </Grid>
                        </DataTemplate>
                    </ListView.ItemTemplate>
                </ListView>

            </RelativePanel>
        </Grid>

    </Grid>
</Page>
